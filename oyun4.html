<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enerji Akƒ±≈üƒ± - Soldan Saƒüa Kuralƒ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background: #1e272e;
            font-family: 'Orbitron', sans-serif;
            color: #dfe6e9;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        /* Arkaplan Izgarasƒ± */
        .grid-bg {
            position: absolute;
            width: 100%;
            height: 100%;
            background:
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
        }

        /* HUD */
        .hud-top {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            z-index: 100;
            box-sizing: border-box;
        }

        .hud-btn {
            background: rgba(84, 160, 255, 0.1);
            border: 1px solid #54a0ff;
            color: #54a0ff;
            padding: 8px 16px;
            text-decoration: none;
            cursor: pointer;
            transition: 0.3s;
        }

        .hud-btn:hover {
            background: #54a0ff;
            color: #fff;
        }

        .btn-code {
            border-color: #a29bfe;
            color: #a29bfe;
            margin-left: 10px;
        }

        .btn-code:hover {
            background: #a29bfe;
            color: #000;
        }

        /* Oyun Alanƒ± */
        .pipeline-container {
            position: relative;
            width: 800px;
            height: 500px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #576574;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        /* Kaynak */
        .source-box {
            position: absolute;
            top: 50px;
            left: 50px;
            background: #2f3542;
            border: 2px solid #ffd32a;
            padding: 15px;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 0 20px #ffd32a;
            z-index: 10;
        }

        /* Hedef */
        .target-box {
            position: absolute;
            top: 50px;
            right: 50px;
            background: #2f3542;
            border: 2px solid #00d2d3;
            padding: 15px;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 0 20px #00d2d3;
            opacity: 0.5;
            z-index: 10;
        }

        .target-box.active {
            opacity: 1;
            background: #00d2d3;
            color: #000;
            box-shadow: 0 0 40px #00d2d3;
        }

        /* Soru Metni */
        .expr-display {
            position: absolute;
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2.5rem;
            color: #fff;
            text-shadow: 0 0 10px #54a0ff;
            background: rgba(0, 0, 0, 0.6);
            padding: 10px 30px;
            border-radius: 10px;
            border: 1px solid #54a0ff;
        }

        /* Borular (SVG) */
        .pipes-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .pipe-path {
            fill: none;
            stroke: #576574;
            stroke-width: 15;
            stroke-linecap: round;
        }

        .energy-flow {
            fill: none;
            stroke: #54a0ff;
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 2000;
            stroke-dashoffset: 2000;
            transition: stroke-dashoffset 2s linear;
        }

        /* Vanalar */
        .valve {
            position: absolute;
            width: 100px;
            height: 60px;
            background: #2d3436;
            border: 2px solid #7f8fa6;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            transition: 0.3s;
            z-index: 20;
        }

        .valve:hover {
            transform: scale(1.1);
            border-color: #fff;
        }

        .valve.correct {
            border-color: #00d2d3;
            background: rgba(0, 210, 211, 0.2);
        }

        .valve.wrong {
            border-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.2);
        }

        .valve-a {
            bottom: 100px;
            left: 200px;
        }

        .valve-b {
            bottom: 100px;
            right: 200px;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-card {
            background: #2d3436;
            border: 2px solid #54a0ff;
            padding: 40px;
            text-align: center;
            border-radius: 20px;
            max-width: 500px;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            color: #aaa;
            cursor: pointer;
            background: none;
            border: none;
        }

        /* Kod Bloƒüu */
        .code-block {
            background: #1e1e1e;
            color: #dcdccc;
            padding: 15px;
            border-radius: 5px;
            text-align: left;
            font-family: monospace;
            font-size: 1rem;
            margin: 20px 0;
            border-left: 4px solid #a29bfe;
        }

        .kw {
            color: #569cd6;
        }

        .fn {
            color: #dcdcaa;
        }

        .str {
            color: #ce9178;
        }

        .num {
            color: #b5cea8;
        }

        .com {
            color: #6a9955;
        }
    </style>
</head>

<body>

    <div class="grid-bg"></div>

    <div class="hud-top">
        <a href="index.html" class="hud-btn">‚ùÆ ANA MEN√ú</a>
        <div>
            <span style="font-size:1.2rem; color:#54a0ff;">AKI≈û: <span id="level-txt">1/5</span></span>
            <button onclick="openCodeModal()" class="hud-btn btn-code">KODLA</button>
        </div>
    </div>

    <div class="pipeline-container">
        <svg class="pipes-svg">
            <!-- Ana Hat -->
            <path d="M 90 90 L 400 90 L 400 180" class="pipe-path" />
            <path d="M 90 90 L 400 90 L 400 180" class="energy-flow" id="flow-main" />

            <!-- Sol Hat (A) -->
            <path d="M 400 180 L 250 180 L 250 400" class="pipe-path" />
            <path d="M 400 180 L 250 180 L 250 400" class="energy-flow" id="flow-a" />

            <!-- Saƒü Hat (B) -->
            <path d="M 400 180 L 550 180 L 550 400" class="pipe-path" />
            <path d="M 400 180 L 550 180 L 550 400" class="energy-flow" id="flow-b" />
        </svg>

        <div class="source-box">‚ö°</div>
        <div class="target-box" id="target">üîã</div>

        <div class="expr-display" id="expr">10 - 4 + 2</div>

        <div class="valve valve-a" id="btn-a" onclick="checkAnswer('a')">8</div>
        <div class="valve valve-b" id="btn-b" onclick="checkAnswer('b')">6</div>
    </div>

    <!-- Ba≈ülangƒ±√ß Modalƒ± -->
    <div class="modal" id="startModal" style="display:flex;">
        <div class="modal-card">
            <h1 style="color:#54a0ff;">ENERJƒ∞ AKI≈ûI</h1>
            <p>Aynƒ± √∂ncelikli i≈ülemlerde (√áarpma/B√∂lme veya Toplama/√áƒ±karma) kural basittir:</p>
            <h2 style="color:#fff;">SOLDAN SAƒûA</h2>
            <button onclick="startGame()" class="hud-btn" style="font-size:1.2rem; margin-top:20px;">BA≈ûLAT</button>
        </div>
    </div>

    <div class="modal" id="endModal">
        <div class="modal-card">
            <h1>Sƒ∞STEM ONLƒ∞NE</h1>
            <p>Enerji hatlarƒ± ba≈üarƒ±yla baƒülandƒ±.</p>
            <div style="margin:20px 0; border:1px dashed #54a0ff; padding:10px; color:#54a0ff;">
                ≈ûƒ∞FRE PAR√áASI: <strong>E</strong>
            </div>
            <button onclick="window.location.href='index.html'" class="hud-btn">√áIKI≈û</button>
        </div>
    </div>

    <!-- Kod Modalƒ± -->
    <div class="modal" id="codeModal">
        <div class="modal-card" style="border-color:#a29bfe; width:90%; max-width:500px;">
            <button class="close-btn" onclick="closeCodeModal()">√ó</button>
            <h2 style="color:#a29bfe;">üíª ƒ∞≈ûLEM SIRASI</h2>
            <p>Kodlar daima yukarƒ±dan a≈üaƒüƒ±ya ve soldan saƒüa i≈ülenir.</p>

            <div class="code-block">
                <span class="com">// Soldan Saƒüa Kuralƒ±</span><br>
                <span class="kw">let</span> boru1 = 10 / 2 * 5;<br><br>
                <span class="com">// Adƒ±m 1: 10 / 2 = 5</span><br>
                <span class="com">// Adƒ±m 2: 5 * 5 = 25</span><br><br>
                <span class="fn">enerjiGonder</span>(boru1);
            </div>

            <a href="https://app.talent14.com/codeEditor" target="_blank" class="hud-btn"
                style="background:#a29bfe; color:#000;">EDƒ∞T√ñRDE A√á</a>
        </div>
    </div>

    <script>
        const levels = [
            { q: "12 - 4 + 2", a: 10, b: 6, correct: 'a', hint: "Soldan ba≈üla: 12-4=8, sonra 8+2=10" },
            { q: "20 / 5 x 2", a: 2, b: 8, correct: 'b', hint: "Soldan ba≈üla: 20/5=4, sonra 4x2=8" },
            { q: "40 x 2 / 10", a: 8, b: 400, correct: 'a', hint: "Soldan ba≈üla: 40x2=80, sonra 80/10=8" },
            { q: "15 + 5 - 10", a: 10, b: 20, correct: 'a', hint: "Soldan ba≈üla: 15+5=20, sonra 20-10=10" },
            { q: "8 / 2 x 4", a: 1, b: 16, correct: 'b', hint: "Soldan ba≈üla: 8/2=4, sonra 4x4=16" }
        ];

        let currentLevel = 0;
        let isLocked = false;

        function startGame() {
            document.getElementById('startModal').style.display = 'none';
            loadLevel();
        }

        function loadLevel() {
            if (currentLevel >= levels.length) {
                document.getElementById('endModal').style.display = 'flex';
                return;
            }

            const data = levels[currentLevel];
            document.getElementById('level-txt').innerText = (currentLevel + 1) + "/" + levels.length;
            document.getElementById('expr').innerText = data.q;

            const btnA = document.getElementById('btn-a');
            const btnB = document.getElementById('btn-b');

            btnA.innerText = data.a;
            btnB.innerText = data.b;
            btnA.className = "valve valve-a";
            btnB.className = "valve valve-b";

            // Reset Flow
            document.getElementById('flow-main').style.strokeDashoffset = 2000;
            document.getElementById('flow-a').style.strokeDashoffset = 2000;
            document.getElementById('flow-b').style.strokeDashoffset = 2000;

            // Start Main Flow
            setTimeout(() => {
                document.getElementById('flow-main').style.strokeDashoffset = 1800; // Yarƒ±m akƒ±≈ü
            }, 100);

            isLocked = false;
        }

        function checkAnswer(choice) {
            if (isLocked) return;
            isLocked = true;

            const data = levels[currentLevel];
            const btn = document.getElementById('btn-' + choice);
            const flow = document.getElementById('flow-' + choice);

            if (choice === data.correct) {
                btn.classList.add('correct');
                flow.style.strokeDashoffset = 0; // Akƒ±≈üƒ± tamamla

                // Animasyon bitince
                setTimeout(() => {
                    document.getElementById('target').classList.add('active');
                    setTimeout(() => {
                        document.getElementById('target').classList.remove('active');
                        currentLevel++;
                        loadLevel();
                    }, 1000);
                }, 2000);
            } else {
                btn.classList.add('wrong');
                alert("HATA: Akƒ±≈ü tƒ±kandƒ±! " + data.hint);
                isLocked = false;
                btn.classList.remove('wrong');
            }
        }

        function openCodeModal() { document.getElementById('codeModal').style.display = 'flex'; }
        function closeCodeModal() { document.getElementById('codeModal').style.display = 'none'; }

    </script>
</body>

</html>